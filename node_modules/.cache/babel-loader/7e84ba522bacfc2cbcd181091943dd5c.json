{"ast":null,"code":"import _objectSpread from \"/Users/mattemac/Documents/Lambda School/FSWPT2/front-end-project-week/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _toConsumableArray from \"/Users/mattemac/Documents/Lambda School/FSWPT2/front-end-project-week/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _defineProperty from \"/Users/mattemac/Documents/Lambda School/FSWPT2/front-end-project-week/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/Users/mattemac/Documents/Lambda School/FSWPT2/front-end-project-week/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/mattemac/Documents/Lambda School/FSWPT2/front-end-project-week/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/mattemac/Documents/Lambda School/FSWPT2/front-end-project-week/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/mattemac/Documents/Lambda School/FSWPT2/front-end-project-week/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/mattemac/Documents/Lambda School/FSWPT2/front-end-project-week/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/mattemac/Documents/Lambda School/FSWPT2/front-end-project-week/src/components/NoteDetail.js\";\nimport React from \"react\";\nimport axios from \"axios\";\n\nvar NoteDetail =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(NoteDetail, _React$Component);\n\n  function NoteDetail() {\n    var _this;\n\n    _classCallCheck(this, NoteDetail);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(NoteDetail).call(this));\n\n    _this.fetchNote = function () {\n      axios.get(\"https://stark-refuge-65834.herokuapp.com/api/posts/\".concat(_this.props.match.params.id)).then(function (response) {\n        _this.setState({\n          id: response.data.id,\n          title: response.data.title,\n          contents: response.data.contents,\n          tags: response.data.tags,\n          created_at: response.data.created_at,\n          updated_at: response.data.updated_at\n        });\n      }).catch(function (err) {\n        return console.log(err.response);\n      });\n    };\n\n    _this.handleEditing = function () {\n      _this.setState({\n        editing: true\n      });\n    };\n\n    _this.handleInput = function (e) {\n      _this.setState(_defineProperty({}, e.target.name, e.target.value));\n    };\n\n    _this.handleSubmitTag = function (e) {\n      e.preventDefault();\n\n      _this.setState({\n        tags: [].concat(_toConsumableArray(_this.state.tags), [_this.state.tag]),\n        tag: ''\n      });\n    };\n\n    _this.deletePostTag = function (tag) {\n      _this.setState({\n        tags: _this.state.tags.filter(function (ele) {\n          return ele !== tag;\n        })\n      });\n    };\n\n    _this.handleUpdate = function (e) {\n      e.preventDefault();\n      var newNote = {\n        tags: _this.state.tags,\n        title: _this.state.title,\n        contents: _this.state.contents\n      };\n\n      _this.putNote(newNote);\n\n      _this.setState({\n        editing: false\n      });\n    };\n\n    _this.handleDelete = function () {\n      _this.deleteNote(_this.state.id);\n\n      _this.props.history.push(\"/\");\n    };\n\n    _this.putNote = function (note) {\n      axios.put(\"https://stark-refuge-65834.herokuapp.com/api/posts/\".concat(_this.state.id), _objectSpread({}, note)).then(function (response) {\n        _this.props.fetchNotes();\n\n        _this.props.fetchTags();\n      }).catch(function (err) {\n        return console.log(err);\n      });\n    };\n\n    _this.deleteNote = function (id) {\n      axios.delete(\"https://stark-refuge-65834.herokuapp.com/api/posts/\".concat(id)).then(function (response) {\n        _this.props.fetchNotes();\n      }).catch(function (err) {\n        return console.log(err);\n      });\n    };\n\n    _this.state = {\n      id: \"\",\n      tags: [],\n      tag: '',\n      title: \"\",\n      contents: \"\",\n      created_at: \"\",\n      updated_at: \"\",\n      editing: false\n    };\n    return _this;\n  }\n\n  _createClass(NoteDetail, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      axios.get(\"https://stark-refuge-65834.herokuapp.com/api/posts/\".concat(this.props.match.params.id)).then(function (response) {\n        _this2.setState({\n          id: response.data.id,\n          title: response.data.title,\n          contents: response.data.contents,\n          tags: response.data.tags,\n          created_at: response.data.created_at,\n          updated_at: response.data.updated_at\n        });\n      }).catch(function (err) {\n        return console.log(err.response);\n      }); // this.fetchNote();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      return React.createElement(\"div\", {\n        className: \"note-detail\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123\n        },\n        __self: this\n      }, React.createElement(\"header\", {\n        className: \"body-header\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"tags-container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125\n        },\n        __self: this\n      }, React.createElement(\"form\", {\n        className: \"tags-form\",\n        onClick: this.handleEditing.bind(this),\n        onSubmit: this.handleSubmitTag,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"tags-list\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"tags\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129\n        },\n        __self: this\n      }, this.state.tags.map(function (tag) {\n        return React.createElement(\"div\", {\n          className: \"tag\",\n          key: tag.id,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 131\n          },\n          __self: this\n        }, React.createElement(\"p\", {\n          key: tag,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 132\n          },\n          __self: this\n        }, tag), React.createElement(\"p\", {\n          className: \"x hide-x\",\n          onClick: _this3.deletePostTag.bind(_this3, tag),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 133\n          },\n          __self: this\n        }, \"|  x\"));\n      }))), React.createElement(\"input\", {\n        className: \"input-tags\",\n        type: \"text\",\n        name: \"tag\",\n        value: this.state.tag,\n        onChange: this.handleInput,\n        placeholder: \"add tags\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"btn-container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        className: this.state.editing ? \"save-btn\" : \"hide\",\n        onClick: this.handleUpdate,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148\n        },\n        __self: this\n      }, \"save\"), React.createElement(\"button\", {\n        className: \"delete-btn\",\n        onClick: this.handleDelete,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154\n        },\n        __self: this\n      }, \"delete\"))), React.createElement(\"div\", {\n        className: \"timeStamp\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160\n        },\n        __self: this\n      }, \"Created: \", this.state.created_at), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161\n        },\n        __self: this\n      }, \"Updated: \", this.state.updated_at))), React.createElement(\"hr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164\n        },\n        __self: this\n      }), React.createElement(\"h3\", {\n        onClick: this.handleEditing.bind(this),\n        className: this.state.editing ? \"none\" : \"note-title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165\n        },\n        __self: this\n      }, this.state.title), React.createElement(\"input\", {\n        className: this.state.editing ? \"input-title\" : \"none\",\n        type: \"text\",\n        value: this.state.title,\n        name: \"title\",\n        onChange: this.handleInput.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171\n        },\n        __self: this\n      }), React.createElement(\"p\", {\n        className: this.state.editing ? \"none\" : \"note-body\",\n        onClick: this.handleEditing.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178\n        },\n        __self: this\n      }, this.state.contents), React.createElement(\"textarea\", {\n        className: this.state.editing ? \"input-body\" : \"none\",\n        type: \"textarea\",\n        value: this.state.contents,\n        name: \"contents\",\n        onChange: this.handleInput.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 184\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return NoteDetail;\n}(React.Component);\n\nexport default NoteDetail;","map":{"version":3,"sources":["/Users/mattemac/Documents/Lambda School/FSWPT2/front-end-project-week/src/components/NoteDetail.js"],"names":["React","axios","NoteDetail","fetchNote","get","props","match","params","id","then","response","setState","data","title","contents","tags","created_at","updated_at","catch","err","console","log","handleEditing","editing","handleInput","e","target","name","value","handleSubmitTag","preventDefault","state","tag","deletePostTag","filter","ele","handleUpdate","newNote","putNote","handleDelete","deleteNote","history","push","note","put","fetchNotes","fetchTags","delete","bind","map","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport axios from \"axios\";\n\nclass NoteDetail extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      id: \"\",\n      tags: [],\n      tag: '',\n      title: \"\",\n      contents: \"\",\n      created_at: \"\",\n      updated_at: \"\",\n      editing: false\n    };\n  }\n\n  componentDidMount() {\n    axios\n      .get(\n        `https://stark-refuge-65834.herokuapp.com/api/posts/${this.props.match.params.id}`\n      )\n      .then(response => {\n        this.setState({\n          id: response.data.id,\n          title: response.data.title,\n          contents: response.data.contents,\n          tags: response.data.tags,\n          created_at: response.data.created_at,\n          updated_at: response.data.updated_at\n        });\n      })\n      .catch(err => console.log(err.response));\n    // this.fetchNote();\n  }\n\n  fetchNote = () => {\n    axios\n      .get(\n        `https://stark-refuge-65834.herokuapp.com/api/posts/${this.props.match.params.id}`\n      )\n      .then(response => {\n        this.setState({\n          id: response.data.id,\n          title: response.data.title,\n          contents: response.data.contents,\n          tags: response.data.tags,\n          created_at: response.data.created_at,\n          updated_at: response.data.updated_at\n        });\n      })\n      .catch(err => console.log(err.response));\n  }\n\n  handleEditing = () => {\n    this.setState({\n      editing: true\n    });\n  };\n\n  handleInput = e => {\n    this.setState({\n      [e.target.name]: e.target.value\n    });\n  };\n\n  handleSubmitTag = e => {\n    e.preventDefault();\n    this.setState({\n      tags: [...this.state.tags, this.state.tag],\n      tag: ''\n    })\n  }\n\n  deletePostTag = tag => {\n    this.setState({\n      tags: this.state.tags.filter(ele => {\n        return ele !== tag;\n      })\n    })\n  }\n\n  handleUpdate = e => {\n    e.preventDefault();\n    const newNote = {\n      tags: this.state.tags,\n      title: this.state.title,\n      contents: this.state.contents\n    };\n    this.putNote(newNote);\n    this.setState({ editing: false });\n  };\n\n  handleDelete = () => {\n    this.deleteNote(this.state.id);\n    this.props.history.push(\"/\");\n  };\n\n  putNote = note => {\n    axios\n      .put(`https://stark-refuge-65834.herokuapp.com/api/posts/${this.state.id}`, {\n        ...note\n      })\n      .then(response => {\n        this.props.fetchNotes();\n        this.props.fetchTags();\n      })\n      .catch(err => console.log(err));\n  };\n\n  deleteNote = id => {\n    axios\n      .delete(`https://stark-refuge-65834.herokuapp.com/api/posts/${id}`)\n      .then(response => {\n        this.props.fetchNotes();\n      })\n      .catch(err => console.log(err));\n  };\n\n  render() {\n    return (\n      <div className=\"note-detail\">\n        <header className=\"body-header\">\n          <div className=\"tags-container\">\n            <form className=\"tags-form\" onClick={this.handleEditing.bind(this)}\n              onSubmit={this.handleSubmitTag}>\n              <div className=\"tags-list\">\n                <div className=\"tags\">\n                  {this.state.tags.map(tag => {\n                    return <div className=\"tag\" key={tag.id}>\n                      <p key={tag}>{tag}</p>\n                      <p className='x hide-x' onClick={this.deletePostTag.bind(this, tag)}>|  x</p>\n                    </div>\n                  })}\n                </div>\n              </div>\n              <input\n                className=\"input-tags\"\n                type=\"text\"\n                name=\"tag\"\n                value={this.state.tag}\n                onChange={this.handleInput}\n                placeholder=\"add tags\"\n              />\n            </form>\n            <div className=\"btn-container\">\n              <button\n                className={this.state.editing ? \"save-btn\" : \"hide\"}\n                onClick={this.handleUpdate}\n              >\n                save\n          </button>\n              <button className=\"delete-btn\" onClick={this.handleDelete}>\n                delete\n          </button>\n            </div>\n          </div>\n          <div className=\"timeStamp\">\n            <p>Created: {this.state.created_at}</p>\n            <p>Updated: {this.state.updated_at}</p>\n          </div>\n        </header>\n        <hr></hr>\n        <h3\n          onClick={this.handleEditing.bind(this)}\n          className={this.state.editing ? \"none\" : \"note-title\"}\n        >\n          {this.state.title}\n        </h3>\n        <input\n          className={this.state.editing ? \"input-title\" : \"none\"}\n          type=\"text\"\n          value={this.state.title}\n          name=\"title\"\n          onChange={this.handleInput.bind(this)}\n        />\n        <p\n          className={this.state.editing ? \"none\" : \"note-body\"}\n          onClick={this.handleEditing.bind(this)}\n        >\n          {this.state.contents}\n        </p>\n        <textarea\n          className={this.state.editing ? \"input-body\" : \"none\"}\n          type=\"textarea\"\n          value={this.state.contents}\n          name=\"contents\"\n          onChange={this.handleInput.bind(this)}\n        />\n\n      </div>\n    );\n  }\n}\n\nexport default NoteDetail;"]},"metadata":{},"sourceType":"module"}