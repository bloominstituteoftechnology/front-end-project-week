{"code":"import * as tslib_1 from \"tslib\";\r\nimport * as React from 'react';\r\nvar Children = React.Children, cloneElement = React.cloneElement;\r\nvar getKey = function (child) { return child.key; };\r\nvar filterChildProps = function (_a) {\r\n    var children = _a.children, _pose = _a._pose, onPoseComplete = _a.onPoseComplete, popFromFlow = _a.popFromFlow, props = tslib_1.__rest(_a, [\"children\", \"_pose\", \"onPoseComplete\", \"popFromFlow\"]);\r\n    return props;\r\n};\r\nvar animateChildrenList = function (incomingChildren, pose, initialPose) {\r\n    var children = [];\r\n    Children.forEach(incomingChildren, function (child) {\r\n        return children.push(cloneElement(child, { pose: pose, initialPose: initialPose }));\r\n    });\r\n    return children;\r\n};\r\nvar mergeChildren = function (_a) {\r\n    var incomingChildren = _a.incomingChildren, displayedChildren = _a.displayedChildren, isLeaving = _a.isLeaving, removeFromTree = _a.removeFromTree, groupProps = _a.groupProps;\r\n    var groupChildren = groupProps.children, preEnterPose = groupProps.preEnterPose, enterPose = groupProps.enterPose, exitPose = groupProps.exitPose, flipMove = groupProps.flipMove, animateOnMount = groupProps.animateOnMount, propsForChild = tslib_1.__rest(groupProps, [\"children\", \"preEnterPose\", \"enterPose\", \"exitPose\", \"flipMove\", \"animateOnMount\"]);\r\n    var children = [];\r\n    var prevKeys = displayedChildren.map(getKey);\r\n    var nextKeys = incomingChildren.map(getKey);\r\n    var entering = new Set(nextKeys.filter(function (key) { return isLeaving.has(key) || prevKeys.indexOf(key) === -1; }));\r\n    entering.forEach(function (key) { return isLeaving.delete(key); });\r\n    var leaving = prevKeys.filter(function (key) {\r\n        return !entering.has(key) && (isLeaving.has(key) || nextKeys.indexOf(key) === -1);\r\n    });\r\n    leaving.forEach(function (key) { return isLeaving.add(key); });\r\n    var moving = new Set(prevKeys.filter(function (key, i) {\r\n        var nextIndex = nextKeys.indexOf(key);\r\n        return !entering.has(key) && nextIndex !== -1 && i !== nextIndex;\r\n    }));\r\n    incomingChildren.forEach(function (child) {\r\n        var newChildProps = tslib_1.__assign({}, propsForChild, filterChildProps(child.props));\r\n        if (entering.has(child.key)) {\r\n            newChildProps.initialPose = preEnterPose;\r\n            newChildProps._pose = enterPose;\r\n        }\r\n        else if (moving.has(child.key) && flipMove) {\r\n            newChildProps._pose = [enterPose, 'flip'];\r\n        }\r\n        else {\r\n            newChildProps._pose = enterPose;\r\n        }\r\n        children.push(cloneElement(child, newChildProps));\r\n    });\r\n    leaving.forEach(function (key) {\r\n        var child = displayedChildren.find(function (c) { return c.key === key; });\r\n        var newChild = cloneElement(child, tslib_1.__assign({ _pose: exitPose, onPoseComplete: removeFromTree(key), popFromFlow: flipMove }, propsForChild, filterChildProps(child.props)));\r\n        var insertionIndex = prevKeys.indexOf(key);\r\n        children.splice(insertionIndex, 0, newChild);\r\n    });\r\n    return children;\r\n};\r\nexport var handleIncomingChildren = function (props) {\r\n    var displayedChildren = props.displayedChildren, incomingChildren = props.incomingChildren, groupProps = props.groupProps;\r\n    var animateOnMount = groupProps.animateOnMount, preEnterPose = groupProps.preEnterPose, enterPose = groupProps.enterPose;\r\n    if (!displayedChildren && animateOnMount) {\r\n        return animateChildrenList(incomingChildren, enterPose, preEnterPose);\r\n    }\r\n    else if (displayedChildren) {\r\n        return mergeChildren(props);\r\n    }\r\n    else {\r\n        return animateChildrenList(incomingChildren, enterPose);\r\n    }\r\n};\r\nexport var makeChildList = function (children) {\r\n    var list = [];\r\n    Children.forEach(children, function (child) { return child && list.push(child); });\r\n    return list;\r\n};\r\nexport var removeFromChildren = function (children, key) { return children.filter(function (child) { return child.key !== key; }); };\r\n//# sourceMappingURL=children.js.map","map":"{\"version\":3,\"file\":\"children.js\",\"sourceRoot\":\"\",\"sources\":[\"../../src/components/Transition/children.ts\"],\"names\":[],\"mappings\":\";AAAA,OAAO,KAAK,KAAK,MAAM,OAAO,CAAC;AAIvB,IAAA,yBAAQ,EAAE,iCAAY,CAAW;AAEzC,IAAM,MAAM,GAAG,UAAC,KAAwB,IAAa,OAAA,KAAK,CAAC,GAAa,EAAnB,CAAmB,CAAC;AAEzE,IAAM,gBAAgB,GAAG,UAAC,EAAiE;IAA/D,IAAA,sBAAQ,EAAE,gBAAK,EAAE,kCAAc,EAAE,4BAAW,EAAE,kFAAQ;IAAc,OAAA,KAAK,CAAA;CAAA,CAAC;AAEtG,IAAM,mBAAmB,GAAG,UAC1B,gBAA0C,EAC1C,IAAiB,EACjB,WAAyB;IAEzB,IAAM,QAAQ,GAA6B,EAAE,CAAC;IAE9C,QAAQ,CAAC,OAAO,CAAC,gBAAgB,EAAE,UAAC,KAAwB;QAC1D,OAAA,QAAQ,CAAC,IAAI,CAAC,YAAY,CAAC,KAAK,EAAE,EAAE,IAAI,MAAA,EAAE,WAAW,aAAA,EAAE,CAAC,CAAC;IAAzD,CAAyD,CAC1D,CAAC;IACF,OAAO,QAAQ,CAAC;AAClB,CAAC,CAAC;AAEF,IAAM,aAAa,GAAG,UAAC,EAMF;QALnB,sCAAgB,EAChB,wCAAiB,EACjB,wBAAS,EACT,kCAAc,EACd,0BAAU;IAGR,IAAA,mCAAuB,EACvB,sCAAY,EACZ,gCAAS,EACT,8BAAQ,EACR,8BAAQ,EACR,0CAAc,EACd,+HAAgB,CACH;IACf,IAAM,QAAQ,GAA6B,EAAE,CAAC;IAE9C,IAAM,QAAQ,GAAG,iBAAiB,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;IAC/C,IAAM,QAAQ,GAAG,gBAAgB,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;IAE9C,IAAM,QAAQ,GAAG,IAAI,GAAG,CACtB,QAAQ,CAAC,MAAM,CAAC,UAAA,GAAG,IAAI,OAAA,SAAS,CAAC,GAAG,CAAC,GAAG,CAAC,IAAI,QAAQ,CAAC,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,EAAlD,CAAkD,CAAC,CAC3E,CAAC;IACF,QAAQ,CAAC,OAAO,CAAC,UAAA,GAAG,IAAI,OAAA,SAAS,CAAC,MAAM,CAAC,GAAG,CAAC,EAArB,CAAqB,CAAC,CAAC;IAE/C,IAAM,OAAO,GAAG,QAAQ,CAAC,MAAM,CAC7B,UAAA,GAAG;QACD,OAAA,CAAC,QAAQ,CAAC,GAAG,CAAC,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,GAAG,CAAC,IAAI,QAAQ,CAAC,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC;IAA1E,CAA0E,CAC7E,CAAC;IAEF,OAAO,CAAC,OAAO,CAAC,UAAA,GAAG,IAAI,OAAA,SAAS,CAAC,GAAG,CAAC,GAAG,CAAC,EAAlB,CAAkB,CAAC,CAAC;IAE3C,IAAM,MAAM,GAAG,IAAI,GAAG,CACpB,QAAQ,CAAC,MAAM,CAAC,UAAC,GAAG,EAAE,CAAC;QACrB,IAAM,SAAS,GAAG,QAAQ,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;QACxC,OAAO,CAAC,QAAQ,CAAC,GAAG,CAAC,GAAG,CAAC,IAAI,SAAS,KAAK,CAAC,CAAC,IAAI,CAAC,KAAK,SAAS,CAAC;IACnE,CAAC,CAAC,CACH,CAAC;IAEF,gBAAgB,CAAC,OAAO,CAAC,UAAA,KAAK;QAC5B,IAAM,aAAa,wBACd,aAAa,EACb,gBAAgB,CAAC,KAAK,CAAC,KAAK,CAAC,CACjC,CAAC;QAEF,IAAI,QAAQ,CAAC,GAAG,CAAC,KAAK,CAAC,GAAa,CAAC,EAAE;YACrC,aAAa,CAAC,WAAW,GAAG,YAAY,CAAC;YACzC,aAAa,CAAC,KAAK,GAAG,SAAS,CAAC;SACjC;aAAM,IAAI,MAAM,CAAC,GAAG,CAAC,KAAK,CAAC,GAAa,CAAC,IAAI,QAAQ,EAAE;YACtD,aAAa,CAAC,KAAK,GAAG,CAAC,SAAS,EAAE,MAAM,CAAC,CAAC;SAC3C;aAAM;YACL,aAAa,CAAC,KAAK,GAAG,SAAS,CAAC;SACjC;QAED,QAAQ,CAAC,IAAI,CAAC,YAAY,CAAC,KAAK,EAAE,aAAa,CAAC,CAAC,CAAC;IACpD,CAAC,CAAC,CAAC;IAEH,OAAO,CAAC,OAAO,CAAC,UAAA,GAAG;QACjB,IAAM,KAAK,GAAG,iBAAiB,CAAC,IAAI,CAAC,UAAA,CAAC,IAAI,OAAA,CAAC,CAAC,GAAG,KAAK,GAAG,EAAb,CAAa,CAAC,CAAC;QACzD,IAAM,QAAQ,GAAG,YAAY,CAAC,KAAK,qBACjC,KAAK,EAAE,QAAQ,EACf,cAAc,EAAE,cAAc,CAAC,GAAG,CAAC,EACnC,WAAW,EAAE,QAAQ,IAClB,aAAa,EACb,gBAAgB,CAAC,KAAK,CAAC,KAAK,CAAC,EAChC,CAAC;QAEH,IAAM,cAAc,GAAG,QAAQ,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;QAS7C,QAAQ,CAAC,MAAM,CAAC,cAAc,EAAE,CAAC,EAAE,QAAQ,CAAC,CAAC;IAC/C,CAAC,CAAC,CAAC;IAEH,OAAO,QAAQ,CAAC;AAClB,CAAC,CAAC;AAEF,MAAM,CAAC,IAAM,sBAAsB,GAAG,UAAC,KAAyB;IACtD,IAAA,2CAAiB,EAAE,yCAAgB,EAAE,6BAAU,CAAW;IAC1D,IAAA,0CAAc,EAAE,sCAAY,EAAE,gCAAS,CAAgB;IAG/D,IAAI,CAAC,iBAAiB,IAAI,cAAc,EAAE;QACxC,OAAO,mBAAmB,CAAC,gBAAgB,EAAE,SAAS,EAAE,YAAY,CAAC,CAAC;KAGvE;SAAM,IAAI,iBAAiB,EAAE;QAC5B,OAAO,aAAa,CAAC,KAAK,CAAC,CAAC;KAG7B;SAAM;QACL,OAAO,mBAAmB,CAAC,gBAAgB,EAAE,SAAS,CAAC,CAAC;KACzD;AACH,CAAC,CAAC;AAEF,MAAM,CAAC,IAAM,aAAa,GAAG,UAC3B,QAAsD;IAEtD,IAAM,IAAI,GAA6B,EAAE,CAAC;IAC1C,QAAQ,CAAC,OAAO,CACd,QAAQ,EACR,UAAA,KAAK,IAAI,OAAA,KAAK,IAAI,IAAI,CAAC,IAAI,CAAC,KAA0B,CAAC,EAA9C,CAA8C,CACxD,CAAC;IACF,OAAO,IAAI,CAAC;AACd,CAAC,CAAC;AAEF,MAAM,CAAC,IAAM,kBAAkB,GAAG,UAChC,QAAkC,EAClC,GAAW,IACR,OAAA,QAAQ,CAAC,MAAM,CAAC,UAAA,KAAK,IAAI,OAAA,KAAK,CAAC,GAAG,KAAK,GAAG,EAAjB,CAAiB,CAAC,EAA3C,CAA2C,CAAC\"}"}
