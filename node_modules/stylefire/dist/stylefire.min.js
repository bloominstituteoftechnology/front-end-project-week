!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.stylefire={})}(this,function(t){"use strict";var e=function(){return(e=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var a in e=arguments[r])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t}).apply(this,arguments)},r=function(){};"production"!==process.env.NODE_ENV&&(r=function(t,e){if(!t)throw new Error("Hey, listen! ".toUpperCase()+e)});var n,a=0,o="undefined"!=typeof window&&void 0!==window.requestAnimationFrame?function(t){return window.requestAnimationFrame(t)}:function(t){var e=Date.now(),r=Math.max(0,16.7-(e-a));a=e+r,setTimeout(function(){return t(a)},r)};!function(t){t.Read="read",t.Update="update",t.Render="render",t.PostRender="postRender",t.FixedUpdate="fixedUpdate"}(n||(n={}));var i,s=1/60*1e3,u=!0,f=!1,c=!1,l={delta:0,timestamp:0},d=[n.Read,n.Update,n.Render,n.PostRender],p=function(t){return f=t},h=d.reduce(function(t,e){var n,a,o,i,s,u,c,l,d,h=(n=p,a=[],o=[],i=0,s=!1,u=0,c=new WeakSet,l=new WeakSet,d={cancel:function(t){var e=o.indexOf(t);c.add(t),-1!==e&&o.splice(e,1)},process:function(t){var e,r;if(s=!0,a=(e=[o,a])[0],(o=e[1]).length=0,i=a.length)for(u=0;u<i;u++)(r=a[u])(t),!0!==l.has(r)||c.has(r)||(d.schedule(r),n(!0));s=!1},schedule:function(t,e,n){r("function"==typeof t,"Argument must be a function");var u=n&&s,f=u?a:o;e&&l.add(t),-1===f.indexOf(t)&&(f.push(t),u&&(i=a.length))}});return t.sync[e]=function(t,e,r){return void 0===e&&(e=!1),void 0===r&&(r=!1),f||w(),h.schedule(t,e,r),t},t.cancelSync[e]=function(t){return h.cancel(t)},t.steps[e]=h,t},{steps:{},sync:{},cancelSync:{}}),g=h.steps,m=h.sync,v=(h.cancelSync,function(t){return g[t].process(l)}),y=function(t){f=!1,l.delta=u?s:Math.max(Math.min(t-l.timestamp,40),1),u||(s=l.delta),l.timestamp=t,c=!0,d.forEach(v),c=!1,f&&(u=!1,o(y))},w=function(){f=!0,u=!0,c||o(y)},b=function(t){var e=t.onRead,r=t.onRender,n=t.aliasMap,a=void 0===n?{}:n,o=t.useCache,i=void 0===o||o;return function(t){var n={},o=[],s=!1,u=function(t,e){var r=a[t]||t,i=n[r];n[r]=e,n[r]!==i&&(-1===o.indexOf(r)&&o.push(r),s||(s=!0,m.render(f)))};function f(e){return void 0===e&&(e=!1),(!0===e||s)&&(r(n,t,o),s=!1,o.length=0),this}return{get:function(r){var o=a[r]||r;return o?i&&void 0!==n[o]?n[o]:e(o,t):n},set:function(t,e){if("string"==typeof t){if(void 0===e)return function(e){return u(t,e)};u(t,e)}else for(var r in t)t.hasOwnProperty(r)&&u(r,t[r]);return this},render:f}}},O=/([a-z])([A-Z])/g,x=function(t){return t.replace(O,"$1-$2").toLowerCase()},k=new Map,Y=new Map,X=["Webkit","Moz","O","ms",""],M=X.length,R=function(t,e){void 0===e&&(e=!1);var r=e?Y:k;return r.has(t)||function(t){if("undefined"!=typeof document){i=i||document.createElement("div");for(var e=0;e<M;e++){var r=X[e],n=""===r,a=n?t:r+t.charAt(0).toUpperCase()+t.slice(1);a in i.style&&(k.set(t,a),Y.set(t,(n?"":"-")+x(a)))}}}(t),r.get(t)||t},L=["","X","Y","Z"],S=["translate","scale","rotate","skew","transformPerspective"].reduce(function(t,e){return L.reduce(function(t,r){return t.push(e+r),t},t)},["x","y","z"]),P=S.reduce(function(t,e){return t[e]=!0,t},{}),C=function(t){return!0===P[t]},T=function(t,e){return S.indexOf(t)-S.indexOf(e)},Z=function(t){return"transformOriginX"===t||"transformOriginY"===t},A=function(){return(A=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var a in e=arguments[r])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t}).apply(this,arguments)},E=function(t,e){return function(r){return Math.max(Math.min(r,e),t)}},j=function(t){return function(e){return"string"==typeof e&&0===e.indexOf(t)}},F=function(t){return t%1?Number(t.toFixed(5)):t},H={test:function(t){return"number"==typeof t},parse:parseFloat,transform:function(t){return t}},N=A({},H,{transform:E(0,1)}),U=A({},H,{default:1}),W=function(t){return{test:function(e){return"string"==typeof e&&e.endsWith(t)&&1===e.split(" ").length},parse:parseFloat,transform:function(e){return""+e+t}}},V=W("deg"),z=W("%"),I=W("px"),q=E(0,255),B=/^(#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))$/i,$=function(t){return void 0!==t.red},_=function(t){return void 0!==t.hue},D=function(t){var e=t.length;return function(r){if("string"!=typeof r)return r;for(var n,a={},o=function(t){return"string"==typeof t?t.split(/,\s*/):[t]}((n=r).substring(n.indexOf("(")+1,n.lastIndexOf(")"))),i=0;i<e;i++)a[t[i]]=void 0!==o[i]?parseFloat(o[i]):1;return a}},G=A({},H,{transform:function(t){return Math.round(q(t))}}),J=j("rgb"),K={test:function(t){return"string"==typeof t?J(t):$(t)},parse:D(["red","green","blue","alpha"]),transform:function(t){var e=t.red,r=t.green,n=t.blue,a=t.alpha;return function(t){var e=t.red,r=t.green,n=t.blue,a=t.alpha;return"rgba("+e+", "+r+", "+n+", "+(void 0===a?1:a)+")"}({red:G.transform(e),green:G.transform(r),blue:G.transform(n),alpha:F(a)})}},Q=j("hsl"),tt={test:function(t){return"string"==typeof t?Q(t):_(t)},parse:D(["hue","saturation","lightness","alpha"]),transform:function(t){var e=t.hue,r=t.saturation,n=t.lightness,a=t.alpha;return function(t){var e=t.hue,r=t.saturation,n=t.lightness,a=t.alpha;return"hsla("+e+", "+r+", "+n+", "+(void 0===a?1:a)+")"}({hue:Math.round(e),saturation:z.transform(F(r)),lightness:z.transform(F(n)),alpha:F(a)})}},et=A({},K,{test:j("#"),parse:function(t){var e="",r="",n="";return t.length>4?(e=t.substr(1,2),r=t.substr(3,2),n=t.substr(5,2)):(e=t.substr(1,1),r=t.substr(2,1),n=t.substr(3,1),e+=e,r+=r,n+=n),{red:parseInt(e,16),green:parseInt(r,16),blue:parseInt(n,16),alpha:1}}}),rt={test:function(t){return"string"==typeof t&&B.test(t)||K.test(t)||tt.test(t)||et.test(t)},parse:function(t){return K.test(t)?K.parse(t):tt.test(t)?tt.parse(t):et.test(t)?et.parse(t):t},transform:function(t){return $(t)?K.transform(t):_(t)?tt.transform(t):t}},nt={color:rt,backgroundColor:rt,outlineColor:rt,fill:rt,stroke:rt,borderColor:rt,borderTopColor:rt,borderRightColor:rt,borderBottomColor:rt,borderLeftColor:rt,borderRadius:I,width:I,maxWidth:I,height:I,maxHeight:I,top:I,left:I,bottom:I,right:I,rotate:V,rotateX:V,rotateY:V,rotateZ:V,scale:U,scaleX:U,scaleY:U,scaleZ:U,skew:V,skewX:V,skewY:V,distance:I,translateX:I,translateY:I,translateZ:I,perspective:I,opacity:N,transformOriginX:z,transformOriginY:z,transformOriginZ:I},at=function(t){return nt[t]},ot="number",it="object",st="transform-origin",ut="transform",ft="translateZ",ct=";transform: none",lt=function(t,e){return";"+t+":"+e};function dt(t,e,r,n){void 0===e&&(e=!0),void 0===r&&(r=!0);for(var a=!0===e?Object.keys(t):e,o="",i="",s=!1,u=!0,f=!1,c=!1,l=a.length,d=0;d<l;d++){var p=a[d];if(C(p)){for(var h in f=!0,t)C(h)&&-1===a.indexOf(h)&&a.push(h);break}}a.sort(T);var g=a.length;for(d=0;d<g;d++){p=a[d];if(!n.has(p)){var m=C(p),v=t[p],y=at(p);m&&(y.default&&v!==y.default||!y.default&&0!==v)&&(u=!1),y&&(typeof v===ot||typeof v===it)&&y.transform&&(v=y.transform(v)),m?(i+=p+"("+v+") ",c=p===ft||c):Z(p)?(t[p]=v,s=!0):o+=lt(R(p,!0),v)}}return s&&(o+=lt(st,(t.transformOriginX||0)+" "+(t.transformOriginY||0)+" "+(t.transformOriginZ||0))),f&&(!c&&r&&(i+=ft+"(0)"),o+=lt(ut,u?ct:i)),o}var pt=new Set(["scrollLeft","scrollTop"]),ht=b({onRead:function(t,e){var r=e.element,n=e.preparseOutput,a=at(t);if(C(t))return a&&a.default||0;if(pt.has(t))return r[t];var o=window.getComputedStyle(r,null).getPropertyValue(R(t,!0))||0;return n&&a&&a.parse?a.parse(o):o},onRender:function(t,e,r){var n=e.element,a=e.enableHardwareAcceleration;n.style.cssText+=dt(t,r,a,pt),-1!==r.indexOf("scrollLeft")&&(n.scrollLeft=t.scrollLeft),-1!==r.indexOf("scrollTop")&&(n.scrollTop=t.scrollTop)},aliasMap:{x:"translateX",y:"translateY",z:"translateZ",originX:"transformOriginX",originY:"transformOriginY",originZ:"transformOriginZ"},uncachedValues:pt}),gt=function(t,e){return t/100*e+"px"},mt={fill:rt,stroke:rt,scale:U,scaleX:U,scaleY:U,opacity:N,fillOpacity:N,strokeOpacity:N},vt=b({onRead:function(t,e){var r=e.element;if(C(t)){var n=function(t){return mt[t]}(t);return n?n.default:0}return r.getAttribute(t)},onRender:function(t,e,r){var n=e.dimensions;!function(t,e){for(var r in e)e.hasOwnProperty(r)&&t.setAttribute(r,e[r])}(e.element,function(t,e,r,n){var a=!1,o=!1,i={},s=r?{pathLength:"0",pathSpacing:""+n}:void 0,u=void 0!==t.scale?t.scale||1e-7:t.scaleX||1,f=void 0!==t.scaleY?t.scaleY||1e-7:u||1,c=e.width*((t.originX||50)/100)+e.x,l=e.height*((t.originY||50)/100)+e.y,d=1*u*-c,p=1*f*-l,h=c/u,g=l/f,m={translate:"translate("+t.translateX+", "+t.translateY+") ",scale:"translate("+d+", "+p+") scale("+u+", "+f+") translate("+h+", "+g+") ",rotate:"rotate("+t.rotate+", "+c+", "+l+") ",skewX:"skewX("+t.skewX+") ",skewY:"skewY("+t.skewY+") "};for(var v in t)if(t.hasOwnProperty(v)){var y=t[v];C(v)?a=!0:!r||"pathLength"!==v&&"pathSpacing"!==v||"number"!=typeof y?r&&"pathOffset"===v?i["stroke-dashoffset"]=gt(-y,n):i[x(v)]=y:(o=!0,s[v]=gt(y,n))}if(o&&(i["stroke-dasharray"]=s.pathLength+" "+s.pathSpacing),a)for(var v in i.transform="",m)if(m.hasOwnProperty(v)){var w="scale"===v?"1":"0";i.transform+=m[v].replace(/undefined/g,w)}return i}(t,n,e.isPath,e.pathLength))},aliasMap:{x:"translateX",y:"translateY",background:"fill"}}),yt=b({useCache:!1,onRead:function(t){return"scrollTop"===t?window.pageYOffset:window.pageXOffset},onRender:function(t){var e=t.scrollTop,r=void 0===e?0:e,n=t.scrollLeft,a=void 0===n?0:n;return window.scrollTo(a,r)}}),wt=new WeakMap,bt=function(t,n){var a;return t instanceof HTMLElement?a=function(t,r){return ht(e({element:t,enableHardwareAcceleration:!0,preparseOutput:!0},r))}(t,n):t instanceof SVGElement?a=function(t){var e=t.getBBox(),r={element:t,dimensions:{x:e.x,y:e.y,width:e.width,height:e.height},isPath:!1};return"path"===t.tagName&&(r.isPath=!0,r.pathLength=t.getTotalLength()),vt(r)}(t):"undefined"!=typeof window&&t===window&&(a=yt(t)),r(void 0!==a,"No valid node provided. Node must be HTMLElement, SVGElement or window."),wt.set(t,a),a},Ot=function(t,e){return wt.has(t)?wt.get(t):bt(t,e)};t.default=function(t,e){var r="string"==typeof t?document.querySelector(t):t;return Ot(r,e)},t.createStylerFactory=b,t.buildStyles=dt,Object.defineProperty(t,"__esModule",{value:!0})});
